@page "/"

<PageTitle>Merchants</PageTitle>

<h1>Wandering Merchants</h1>

<div class="row">
    <div class="col-4">
        <label for="severRegion">Server Region: </label>
        <select class="form-select" id="severRegion" @bind="@ServerRegion">
            <option></option>
            @foreach (var datacenter in StaticData.ServerRegions)
            {
                <option value="@datacenter.Key">@datacenter.Value.Name</option>
            }
        </select>
    </div>

    <div class="col-4">
        <label class="control-label" for="server">Server: </label>
        <select class="form-select" id="server" @bind="@Server">
            <option></option>
            @if (!string.IsNullOrWhiteSpace(ServerRegion))
            {
                @foreach (var datacenter in StaticData.ServerRegions[ServerRegion].Servers ?? Enumerable.Empty<string>())
                {
                    <option>@datacenter</option>
                }
            }
        </select>
    </div>
    @if (!string.IsNullOrWhiteSpace(Server))
    {
        <div class="col d-flex justify-content-end mt-auto">
            <NotificationToggle />
        </div>
    }
</div>

@if(string.IsNullOrWhiteSpace(ServerRegion) || string.IsNullOrWhiteSpace(Server))
{
    <h3 class="mt-3">Select a Server</h3>
}
else if(_activeMerchantGroups.Count > 0)
{
    @if(_activeMerchantGroups.Any(m => m.IsActive))
    {
        <h3 class="mt-3">Active Merchants</h3>
        <ActiveMerchantsGrid Server="@Server" MerchantGroups="@_activeMerchantGroups" ActiveOnly="true" />
    }
    <h3 class="mt-3">Upcoming Merchants</h3>
    <ActiveMerchantsGrid Server="@Server" MerchantGroups="@_activeMerchantGroups" />
}
